<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>php常识（二） | xiao-linxin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="php常识（二） 11.echo、print、print_r 区别(区分出表达式与语句的区别)：echo，print是语言结构，print_r和var_dump是常规功能。 print并且echo或多或少相同; 它们都是显示字符串的语言结构。差异很微妙：print返回值为1，因此可以在表达式中使用，但echo具有void返回类型。echo可以采用多个参数，尽管这种用法很少见;echo比print快">
<meta name="keywords" content="php">
<meta property="og:type" content="article">
<meta property="og:title" content="php常识（二）">
<meta property="og:url" content="http://yoursite.com/2016/08/01/php常识（二）/index.html">
<meta property="og:site_name" content="xiao-linxin">
<meta property="og:description" content="php常识（二） 11.echo、print、print_r 区别(区分出表达式与语句的区别)：echo，print是语言结构，print_r和var_dump是常规功能。 print并且echo或多或少相同; 它们都是显示字符串的语言结构。差异很微妙：print返回值为1，因此可以在表达式中使用，但echo具有void返回类型。echo可以采用多个参数，尽管这种用法很少见;echo比print快">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-07-02T13:10:24.061Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="php常识（二）">
<meta name="twitter:description" content="php常识（二） 11.echo、print、print_r 区别(区分出表达式与语句的区别)：echo，print是语言结构，print_r和var_dump是常规功能。 print并且echo或多或少相同; 它们都是显示字符串的语言结构。差异很微妙：print返回值为1，因此可以在表达式中使用，但echo具有void返回类型。echo可以采用多个参数，尽管这种用法很少见;echo比print快">
  
    <link rel="alternate" href="/atom.xml" title="xiao-linxin" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="http://img.xingyiss.com/IMG_4296.JPG">
    <h2 class="author">xiao-linxin</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>10</strong><br>文章</div></a>
      <a href="/categories"><div><strong>4</strong><br>分类</div></a>
      <a href="/tags"><div><strong>3</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
          <a href="/search" title="search">
            <li>搜索</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-php常识（二）" class="wow slideInRight article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/01/php常识（二）/" class="article-date">
  <time class="post-time" datetime="2016-07-31T16:00:00.000Z" itemprop="datePublished">
    <span class="post-month">8月</span><br>
    <span class="post-day">01</span>
  </time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      php常识（二）
    </h1>
  

        <div>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/php基础/">php基础</a>,<a class="article-category-link" href="/categories/php基础/php常识/">php常识</a>
  </div>

          
              
  &nbsp; | &nbsp;
  <div class="view-box">
    <span id="/2016/08/01/php常识（二）/" class="leancloud_visitors" data-flag-title="php常识（二）">
      &nbsp;阅读次数<span class="leancloud-visitors-count"></span>
    </span>
  </div>


          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="php常识（二）"><a href="#php常识（二）" class="headerlink" title="php常识（二）"></a>php常识（二）</h1><hr>
<h2 id="11-echo、print、print-r-区别-区分出表达式与语句的区别-："><a href="#11-echo、print、print-r-区别-区分出表达式与语句的区别-：" class="headerlink" title="11.echo、print、print_r 区别(区分出表达式与语句的区别)："></a>11.echo、print、print_r 区别(区分出表达式与语句的区别)：</h2><p>echo，print是语言结构，print_r和var_dump是常规功能。</p>
<p>print并且echo或多或少相同; 它们都是显示字符串的语言结构。<br>差异很微妙：print返回值为1，因此可以在表达式中使用，但echo具有void返回类型。<br>echo可以采用多个参数，尽管这种用法很少见;<br>echo比print快一点。（就个人而言，我总是使用echo，从不print。）</p>
<p>var_dump打印出变量的详细转储，包括其类型大小和任何子项的类型和大小（如果它是数组或对象）。</p>
<p>print_r以更易于阅读的格式化形式打印变量（数组或对象）：<br>不能传递字符串，它省略了类型信息，不给出数组大小等。</p>
<p>var_dump， print_r根据我的经验，通常在调试时更有用。<br>当您不确切知道变量中的值/类型时，它尤其有用。考虑这个测试程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$values = array(0, 0.0, false, &apos;&apos;);</span><br><span class="line"></span><br><span class="line">var_dump($values);</span><br><span class="line"></span><br><span class="line">print_r ($values);</span><br><span class="line"></span><br><span class="line">随着print_r你不能告诉之间的区别0和0.0，或false和&apos;&apos;：</span><br><span class="line"></span><br><span class="line">array(4) &#123;</span><br><span class="line"></span><br><span class="line">  [0]=&gt;  int(0)</span><br><span class="line"></span><br><span class="line">  [1]=&gt;  float(0)</span><br><span class="line"></span><br><span class="line">  [2]=&gt;  bool(false)</span><br><span class="line"></span><br><span class="line">  [3]=&gt;  string(0) &quot;&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Array(</span><br><span class="line"></span><br><span class="line">    [0] =&gt; 0</span><br><span class="line"></span><br><span class="line">    [1] =&gt; 0</span><br><span class="line"></span><br><span class="line">    [2] =&gt;</span><br><span class="line"></span><br><span class="line">    [3] =&gt; )</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="12-construct-与-destruct-区别"><a href="#12-construct-与-destruct-区别" class="headerlink" title="12.construct 与 destruct 区别"></a>12.<strong>construct 与 </strong>destruct 区别</h2><p>在一个类中定义一个方法作为构造函数。</p>
<p>具有构造函数的类会在每次创建新对象时先调用此方法，<br>所以非常适合在使用对象之前做一些初始化工作。</p>
<p>析构函数会在到某个对象的所有引用都被删除或者当对象被显式销毁时执行。</p>
<p>和构造函数一样，父类的析构函数不会被引擎暗中调用。</p>
<p>要执行父类的析构函数，必须在子类的析构函数体中显式调用 parent::__destruct()。</p>
<p>此外也和构造函数一样，子类如果自己没有定义析构函数则会继承父类的。</p>
<p>析构函数即使在使用 exit() 终止脚本运行时也会被调用。</p>
<p>在析构函数中调用 exit() 将会中止其余关闭操作的运行。</p>
<hr>
<h2 id="13-static-作用（区分类与函数内）手册-、SOF"><a href="#13-static-作用（区分类与函数内）手册-、SOF" class="headerlink" title="13.static 作用（区分类与函数内）手册 、SOF"></a>13.static 作用（区分类与函数内）手册 、SOF</h2><p>声明类属性或方法为静态，就可以不实例化类而直接访问。静态属性不能通过一个类已实例化的对象来访问（但静态方法可以）。<br>为了兼容 PHP 4，如果没有指定访问控制，属性和方法默认为公有。<br>由于静态方法不需要通过对象即可调用，所以伪变量 $this 在静态方法中不可用。<br>静态属性不可以由对象通过 -&gt; 操作符来访问，但可以由对象通过 :: 来访问<br>用静态方式调用一个非静态方法会导致一个 E_STRICT 级别的错误。<br>就像其它所有的 PHP 静态变量一样，静态属性只能被初始化为文字或常量，不能使用表达式。所以可以把静态属性初始化为整数或数组，但不能初始化为另一个变量或函数返回值，也不能指向一个对象。<br>也可以用一个值等于类名的字符串变量来动态调用类。但该变量的值不能为关键字 self，parent 或 static，比如有个class A{}， 则可以用$a=’A’; $a::这样调用<br>在类之外（即：在函数中），static变量是在函数退出时不会丢失其值的变量。在同一函数的不同调用中维护的变量只有一个值。从PHP手册的例子：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123;</span><br><span class="line"></span><br><span class="line">    static $a = 0;</span><br><span class="line"></span><br><span class="line">    echo $a;</span><br><span class="line"></span><br><span class="line">    $a++;&#125;</span><br><span class="line"></span><br><span class="line">test();  // prints 0</span><br><span class="line"></span><br><span class="line">test();  // prints 1</span><br><span class="line"></span><br><span class="line">test();  // prints 2</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="14-toString-作用"><a href="#14-toString-作用" class="headerlink" title="14.__toString() 作用"></a>14.__toString() 作用</h2><p>用于一个类被当成字符串时应怎样回应。</p>
<p>例如 echo $obj; （$obj为一个对象） 应该显示些什么。</p>
<p>此方法必须返回一个字符串，否则将发出一条E_RECOVERABLE_ERROR 级别的致命错误。</p>
<p>类似与Java的toString方法。</p>
<hr>
<h2 id="15-单引号’与双引号”区别"><a href="#15-单引号’与双引号”区别" class="headerlink" title="15.单引号’与双引号”区别"></a>15.单引号’与双引号”区别</h2><p>单引号字符串几乎完全“按原样”显示。变量和大多数转义序列都不会被解释。例外情况是，要显示单引号字符，必须使用反斜杠\’转义它，要显示反斜杠字符，必须使用另一个反斜杠转义它\。</p>
<p>双引号字符串将显示一系列转义字符（包括一些正则表达式），并且将解析字符串中的变量。这里重要的一点是，您可以使用花括号来隔离要解析的变量的名称。例如，假设您有变量$type，那么您echo “The $type are”将查找该变量$type。绕过这个用途echo “The {$type} are”您可以在美元符号之前或之后放置左括号。看一下字符串解析，看看如何使用数组变量等。</p>
<p>Heredoc字符串语法就像双引号字符串一样。它始于&lt;&lt;&lt;。在此运算符之后，提供标识符，然后提供换行符。字符串本身如下，然后再次使用相同的标识符来关闭引号。您不需要在此语法中转义引号。</p>
<p>Nowdoc（自PHP 5.3.0开始）字符串语法基本上类似于单引号字符串。不同之处在于，甚至不需要转义单引号或反斜杠。nowdoc用与heredocs相同的&lt;&lt;&lt;序列标识，但后面的标识符用单引号括起来，例如&lt;&lt;&lt;’EOT’。在nowdoc中没有解析。</p>
<hr>
<h2 id="16-常见-HTTP-状态码，分别代表什么含义，301-什么意思-404-呢"><a href="#16-常见-HTTP-状态码，分别代表什么含义，301-什么意思-404-呢" class="headerlink" title="16.常见 HTTP 状态码，分别代表什么含义，301 什么意思 404 呢?"></a>16.常见 HTTP 状态码，分别代表什么含义，301 什么意思 404 呢?</h2><p>1xx消息：这一类型的状态码，代表请求已被接受，需要继续处理。由于HTTP/1.0协议中没有定义任何1xx状态码，所以除非在某些试验条件下，服务器禁止向此类客户端发送1xx响应。<br>2xx成功：这一类型的状态码，代表请求已成功被服务器接收、理解、并接受。<br>200 OK：请求已成功，请求所希望的响应头或数据体将随此响应返回。实际的响应将取决于所使用的请求方法。在GET请求中，响应将包含与请求的资源相对应的实体。在POST请求中，响应将包含描述或操作结果的实体。<br>202 Accepted：服务器已接受请求，但尚未处理。最终该请求可能会也可能不会被执行，并且可能在处理发生时被禁止。<br>204 No Content：服务器成功处理了请求，没有返回任何内容。<br>3xx重定向：这类状态码代表需要客户端采取进一步的操作才能完成请求。通常，这些状态码用来重定向，后续的请求地址（重定向目标）在本次响应的Location域中指明。<br>301 Moved Permanently：被请求的资源已永久移动到新位置，并且将来任何对此资源的引用都应该使用本响应返回的若干个URI之一。如果可能，拥有链接编辑功能的客户端应当自动把请求的地址修改为从服务器反馈回来的地址。除非额外指定，否则这个响应也是可缓存的。新的永久性的URI应当在响应的Location域中返回。除非这是一个HEAD请求，否则响应的实体中应当包含指向新的URI的超链接及简短说明。如果这不是一个GET或者HEAD请求，那么浏览器禁止自动进行重定向，除非得到用户的确认，因为请求的条件可能因此发生变化。注意：对于某些使用HTTP/1.0协议的浏览器，当它们发送的POST请求得到了一个301响应的话，接下来的重定向请求将会变成GET方式。<br>4xx客户端错误：这类的状态码代表了客户端看起来可能发生了错误，妨碍了服务器的处理。除非响应的是一个HEAD请求，否则服务器就应该返回一个解释当前错误状况的实体，以及这是临时的还是永久性的状况。这些状态码适用于任何请求方法。浏览器应当向用户显示任何包含在此类错误响应中的实体内容。<br>400 Bad Request：由于明显的客户端错误（例如，格式错误的请求语法，太大的大小，无效的请求消息或欺骗性路由请求），服务器不能或不会处理该请求。<br>401 Unauthorized：类似于403 Forbidden，401语义即“未认证”，即用户没有必要的凭据。[32]该状态码表示当前请求需要用户验证。该响应必须包含一个适用于被请求资源的WWW-Authenticate信息头用以询问用户信息。客户端可以重复提交一个包含恰当的Authorization头信息的请求。<br>403 Forbidden：服务器已经理解请求，但是拒绝执行它。与401响应不同的是，身份验证并不能提供任何帮助，而且这个请求也不应该被重复提交。如果这不是一个HEAD请求，而且服务器希望能够讲清楚为何请求不能被执行，那么就应该在实体内描述拒绝的原因。当然服务器也可以返回一个404响应，假如它不希望让客户端获得任何信息。<br>404 Not Found：请求失败，请求所希望得到的资源未被在服务器上发现，但允许用户的后续请求。[35]没有信息能够告诉用户这个状况到底是暂时的还是永久的。假如服务器知道情况的话，应当使用410状态码来告知旧资源因为某些内部的配置机制问题，已经永久的不可用，而且没有任何可以跳转的地址。404这个状态码被广泛应用于当服务器不想揭示到底为何请求被拒绝或者没有其他适合的响应可用的情况下。<br>405 Method Not Allowed：请求行中指定的请求方法不能被用于请求相应的资源。<br>408 Request Timeout：请求超时。<br>5xx服务器错误：表示服务器无法完成明显有效的请求。[56]这类状态码代表了服务器在处理请求的过程中有错误或者异常状态发生，也有可能是服务器意识到以当前的软硬件资源无法完成对请求的处理。除非这是一个HEAD请求，否则服务器应当包含一个解释当前错误状态以及这个状况是临时的还是永久的解释信息实体。浏览器应当向用户展示任何在当前响应中被包含的实体。这些状态码适用于任何响应方法。<br>500 Internal Server Error：通用错误消息，服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。没有给出具体错误信息。<br>502 Bad Gateway：作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。<br>503 Service Unavailable：由于临时的服务器维护或者过载，服务器当前无法处理请求。这个状况是暂时的，并且将在一段时间以后恢复。<br>504 Gateway Timeout：作为网关或者代理工作的服务器尝试执行请求时，未能及时从上游服务器（URI标识出的服务器，例如HTTP、FTP、LDAP）或者辅助服务器（例如DNS）收到响应。注意：某些代理服务器在DNS查询超时时会返回400或者500错误。  </p>
<hr>
<h2 id="17-autoload、composer-原理-PSR-4-、原理"><a href="#17-autoload、composer-原理-PSR-4-、原理" class="headerlink" title="17.__autoload、composer 原理 PSR-4 、原理"></a>17.__autoload、composer 原理 PSR-4 、原理</h2><p>autoload机制可以使得PHP程序有可能在使用类时才自动包含类文件，而不是一开始就将所有的类文件include进来，这种机制也称为lazy loading(懒加载)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function __autoload($classname)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  $classpath=&quot;./&quot;.$classname.&apos;.class.php&apos;;</span><br><span class="line"></span><br><span class="line">  if(file_exists($classpath))</span><br><span class="line"></span><br><span class="line">  &#123;    require_once($classpath);  &#125;</span><br><span class="line"></span><br><span class="line">  else</span><br><span class="line"></span><br><span class="line">  &#123;    echo &apos;class file&apos;.$classpath.&apos;not found!&apos;;   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> $person = new Person(”Altair”, 6);</span><br><span class="line"></span><br><span class="line"> var_dump ($person);</span><br></pre></td></tr></table></figure>
<p>通常PHP在使用一个类时，如果发现这个类没有加载，就会自动运行__autoload()函数，在这个函数中我们可以加载需要使用的类。</p>
<p><strong>autoload()至少要做三件事，<br>1：根据类名确定类文件名。<br>2：确定类文件所在的磁盘路径(类与调用它们的PHP程序文件在同一个文件夹下)。<br>3：将类从磁盘文件中加载到系统中(php7.2废除</strong>autoload函数，建议使用spl_autoload_register() 实现相同功能)  </p>
<p>Autoload原理简单概述：<br>1：检查执行器全局变量函数指针autoload_func是否为NULL。<br>2：如果autoload_func==NULL, 则查找系统中是否定义有<strong>autoload()函数，如果没有，则报告错误并退出。<br>3：如果定义了</strong>autoload()函数，则执行<strong>autoload()尝试加载类，并返回加载结果。<br>4：如果autoload_func不为NULL，则直接执行autoload_func指针指向的函数用来加载类。注意此时并不检查</strong>autoload()函数是否定义。  </p>
<p>spl_autoload_register()就是我们上面所说的__autoload调用堆栈，<br>我们可以向这个函数注册多个我们自己的 autoload() 函数，<br>当 PHP 找不到类名时，PHP就会调用这个堆栈，然后去调用自定义的 autoload() 函数，实现自动加载功能。<br>如果我们不向这个函数输入任何参数，那么就会默认注册 spl_autoload() 函数。</p>
<p>composer 做了哪些事情：你有一个项目依赖于若干个库；其中一些库依赖于其他库；你声明你所依赖的东西；composer 会找出哪个版本的包需要安装，并安装它们（将它们下载到你的项目中）。</p>
<p>执行 composer require 时发生了什么：composer 会找到符合 PR4 规范的第三方库的源；<br>将其加载到 vendor 目录下；初始化顶级域名的映射并写入到指定的文件里；<br>写好一个 autoload 函数，并且注册到 spl_autoload_register()里。</p>
<p>composer是利用的遵循psr-4规范的类自动加载机制实现的，PSR-4规范简介：<br>1:完整的类名 必须 要有一个顶级命名空间，被称为 “vendor namespace”；<br>2:完整的类名 可以 有一个或多个子命名空间；<br>3:完整的类名 必须 有一个最终的类名；<br>4:完整的类名 中任意一部分中的下滑线都是没有特殊含义的；<br>5:完整的类名 可以 由任意大小写字母组成；<br>6:所有类名都 必须 是大小写敏感的。<br>7:完整的类名中，去掉最前面的命名空间分隔符，前面连续的一个或多个命名空间和子命名空间，作为「命名空间前缀」，其必须与至少一个「文件基目录」相对应；<br>8:紧接命名空间前缀后的子命名空间 必须 与相应的「文件基目录」相匹配，其中的命名空间分隔符将作为目录分隔符。<br>9:末尾的类名 必须 与对应的以 .php 为后缀的文件同名。<br>10:自动加载器（autoloader）的实现 一定不可 抛出异常、一定不可 触发任一级别的错误信息以及 不应该 有返回值。</p>
<p>composer自动加载原理概述：<br>如果我们在代码中写下 new phpDocumentor\Reflection\Element()，<br>PHP 会通过 SPL_autoload_register 调用 loadClass -&gt; findFile -&gt; findFileWithExtension。<br>步骤如下：</p>
<p>将 \ 转为文件分隔符/，加上后缀php，变成 $logicalPathPsr4, 即 phpDocumentor/Reflection//Element.php;<br>利用命名空间第一个字母p作为前缀索引搜索 prefixLengthsPsr4 数组，查到下面这个数组：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;p&apos; =&gt;</span><br><span class="line">    array (</span><br><span class="line">        &apos;phpDocumentor\\Reflection\\&apos; =&gt; 25,</span><br><span class="line">        &apos;phpDocumentor\\Fake\\&apos; =&gt; 19,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></p>
<p>遍历这个数组，得到两个顶层命名空间 phpDocumentor\Reflection\ 和 phpDocumentor\Fake\</p>
<p>在这个数组中查找 phpDocumentor\Reflection\Element，找出 phpDocumentor\Reflection\ 这个顶层命名空间并且长度为25。<br>在prefixDirsPsr4 映射数组中得到phpDocumentor\Reflection\ 的目录映射为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&apos;phpDocumentor\\Reflection\\&apos; =&gt;</span><br><span class="line">    array (</span><br><span class="line">        0 =&gt; __DIR__ . &apos;/..&apos; . &apos;/phpdocumentor/reflection-common/src&apos;,</span><br><span class="line">        1 =&gt; __DIR__ . &apos;/..&apos; . &apos;/phpdocumentor/type-resolver/src&apos;,</span><br><span class="line">        2 =&gt; __DIR__ . &apos;/..&apos; . &apos;/phpdocumentor/reflection-docblock/src&apos;,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></p>
<p>遍历这个映射数组，得到三个目录映射；<br>查看 “目录+文件分隔符//+substr($logicalPathPsr4, $length)”文件是否存在，存在即返回。这里就是<br>‘<strong>DIR</strong>/../phpdocumentor/reflection-common/src + substr(phpDocumentor/Reflection/Element.php,25)’<br>如果失败，则利用 fallbackDirsPsr4 数组里面的目录继续判断是否存在文件。</p>
<hr>
<h2 id="18-session-共享、存活时间"><a href="#18-session-共享、存活时间" class="headerlink" title="18.session 共享、存活时间"></a>18.session 共享、存活时间</h2><h3 id="为什么要使用Session共享："><a href="#为什么要使用Session共享：" class="headerlink" title="为什么要使用Session共享："></a>为什么要使用Session共享：</h3><p>分布式开发项目中，用户通过浏览器登录商城，实际上会被转发到不同的服务器，当用户登录进入服务器A,session保存了用户的信息，用户再次点击页面被转发到服务器B,这时问题来了，服务器B没有该用户的session信息，无法验证通过，用户被踢回到登录页面，这样体验效果非常不好，甚至无法验证用户，购物车里面商品都不存在了。</p>
<h3 id="利用Redis实现简单的Session共享："><a href="#利用Redis实现简单的Session共享：" class="headerlink" title="利用Redis实现简单的Session共享："></a>利用Redis实现简单的Session共享：</h3><p>1：用户第一次进入商城首页，给一个CSESSIONID,(不用JSESSIONID的原因)，用户添加商品，各种需要记录的操作，都与这个CSESSIONID关联起来；<br>2：当使用登录操作时候，将这个用户的信息，如用户名等存入到redis中，通过K_V，将CSESSIONID加一个标志作为key,将用户信息作为value；<br>3：当用户点击页面被转发到其他服务器时候，在需要验证是否同一个用户时，就可以从redis中取出value,进行验证用户信息，实现共享。  </p>
<h3 id="Session-在php配置文件中的默认有效时间是24分钟，设置session永久有效的方法："><a href="#Session-在php配置文件中的默认有效时间是24分钟，设置session永久有效的方法：" class="headerlink" title="Session 在php配置文件中的默认有效时间是24分钟，设置session永久有效的方法："></a>Session 在php配置文件中的默认有效时间是24分钟，设置session永久有效的方法：</h3><p>1：把“session.use_cookies”设置为1，打开Cookie储存SessionID，不过默认就是1，一般不用修改；<br>2：把“session.cookie_lifetime”改为正无穷（当然没有正无穷的参数，不过999999999和正无穷也没有什么区别）;<br>3：把“session.gc_maxlifetime”设置为和“session.cookie_lifetime”一样的时间；  </p>
<hr>
<h2 id="19-异常处理"><a href="#19-异常处理" class="headerlink" title="19.异常处理"></a>19.异常处理</h2><p>异常处理用于在指定的错误（异常）情况发生时改变脚本的正常流程。这种情况称为异常。  </p>
<h3 id="异常的简单使用："><a href="#异常的简单使用：" class="headerlink" title="异常的简单使用："></a>异常的简单使用：</h3><p>抛出一个异常throw new Exception(“Value must be 1 or below”)，同时不去捕获它，服务器会报Fatal error: Uncaught exception ‘Exception’ 的错误；</p>
<p>抛出一个异常throw new Exception(“Value must be 1 or below”)，<br>并try{} catch(Exception $e){echo:’Message:’ . $e-&gt;getMessage();}，<br>当异常发生时，服务器就会报预设的错误提示：Message: Value must be 1 or below。</p>
<p>自定义Exception类：必须继承Exception类，可以使用Exception类的所有方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class customException extends Exception</span><br><span class="line">&#123;</span><br><span class="line">    public function errorMessage() &#123;</span><br><span class="line">        //error message</span><br><span class="line">        $errorMsg = &apos;Error on line &apos;.$this-&gt;getLine().&apos; in &apos;.$this-&gt;getFile().&apos;: &lt;b&gt;&apos;.$this-&gt;getMessage().&apos;&lt;/b&gt; is not a valid E-Mail address&apos;;</span><br><span class="line">        return $errorMsg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="异常的规则："><a href="#异常的规则：" class="headerlink" title="异常的规则："></a>异常的规则：</h3><p>需要进行异常处理的代码应该放入 try 代码块内，以便捕获潜在的异常。</p>
<p>每个 try 或 throw 代码块必须至少拥有一个对应的 catch 代码块。</p>
<p>使用多个 catch 代码块可以捕获不同种类的异常。</p>
<p>可以在 try 代码块内的 catch 代码块中再次抛出（re-thrown）异常。</p>
<p>简而言之：如果抛出了异常，就必须捕获它</p>
<hr>
<h2 id="20-如何-foreach-迭代对象"><a href="#20-如何-foreach-迭代对象" class="headerlink" title="20.如何 foreach 迭代对象"></a>20.如何 foreach 迭代对象</h2><p>展示foreach工作原理的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">class myIterator implements Iterator &#123;</span><br><span class="line">    private $position = 0;</span><br><span class="line">    private $array = array(</span><br><span class="line">        &quot;firstelement&quot;,</span><br><span class="line">        &quot;secondelement&quot;,</span><br><span class="line">        &quot;lastelement&quot;,</span><br><span class="line">    );  </span><br><span class="line"></span><br><span class="line">    public function __construct() &#123;</span><br><span class="line">        $this-&gt;position = 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //返回到迭代器的第一个元素</span><br><span class="line">    function rewind() &#123;</span><br><span class="line">        var_dump(__METHOD__);</span><br><span class="line">        $this-&gt;position = 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 返回当前元素</span><br><span class="line">    function current() &#123;</span><br><span class="line">        var_dump(__METHOD__);</span><br><span class="line">        return $this-&gt;array[$this-&gt;position];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //返回当前元素的键</span><br><span class="line">    function key() &#123;</span><br><span class="line">        var_dump(__METHOD__);</span><br><span class="line">        return $this-&gt;position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //向前移动到下一个元素</span><br><span class="line">    function next() &#123;</span><br><span class="line">        var_dump(__METHOD__);</span><br><span class="line">        ++$this-&gt;position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //检查当前位置是否有效</span><br><span class="line">    function valid() &#123;</span><br><span class="line">        var_dump(__METHOD__);</span><br><span class="line">        return isset($this-&gt;array[$this-&gt;position]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$it = new myIterator;</span><br><span class="line">foreach($it as $key =&gt; $value) &#123;</span><br><span class="line">    var_dump($key, $value);</span><br><span class="line">    echo &quot;\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">string(18) &quot;myIterator::rewind&quot;</span><br><span class="line">string(17) &quot;myIterator::valid&quot;</span><br><span class="line">string(19) &quot;myIterator::current&quot;</span><br><span class="line">string(15) &quot;myIterator::key&quot;</span><br><span class="line"></span><br><span class="line">int(0)</span><br><span class="line">string(12) &quot;firstelement&quot;</span><br><span class="line">string(16) &quot;myIterator::next&quot;</span><br><span class="line">string(17) &quot;myIterator::valid&quot;</span><br><span class="line">string(19) &quot;myIterator::current&quot;</span><br><span class="line">string(15) &quot;myIterator::key&quot;</span><br><span class="line"></span><br><span class="line">int(1)</span><br><span class="line">string(13) &quot;secondelement&quot;</span><br><span class="line">string(16) &quot;myIterator::next&quot;</span><br><span class="line">string(17) &quot;myIterator::valid&quot;</span><br><span class="line">string(19) &quot;myIterator::current&quot;</span><br><span class="line">string(15) &quot;myIterator::key&quot;</span><br><span class="line"></span><br><span class="line">int(2)</span><br><span class="line">string(11) &quot;lastelement&quot;</span><br><span class="line">string(16) &quot;myIterator::next&quot;</span><br><span class="line">string(17) &quot;myIterator::valid&quot;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/01/php常识（二）/" data-id="cjxlx3yed001ftahnxaxb4nby" class="article-share-link">分享</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/08/15/php常识（三）/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          php常识（三）
        
      </div>
    </a>
  
  
    <a href="/2016/07/20/php常识（一）/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">php常识</div>
    </a>
  
</nav>

  
</article>






</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">xiao-linxin</h1>
    <h2 class="blog-subtitle"></h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
          <a href="/search" title="search">
            <li>搜索</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="http://img.xingyiss.com/IMG_4296.JPG">
    <h2 class="author">xiao-linxin</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>10</strong><br>文章</div></a>
      <a href="/categories"><div><strong>4</strong><br>分类</div></a>
      <a href="/tags"><div><strong>3</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://github.com/xiao-linxin" target="_blank" title="Github">
          Github
        </a>
      
        <a class="hvr-bounce-in" href="https://gitee.com/xiao_linxin" target="_blank" title="Gitee">
          Gitee
        </a>
      
    </div>

    <div class="friend-link">
      <h2></h2>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2016 - 2019 <a href="https://github.com/xiao-linxin">xiao-linxin</a><br>
      Powered by <a href="http://hexo.io/" target="_blank">hexo</a> and <a href="https://github.com/ShanaMaid/hexo-theme-shana">shana</a> and <a href="https://github.com/">github</a>.
      <!--由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 |-->
      <!--主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>-->
      
        | 站长统计 <script>

          var cnzz_s_tag =document.createElement('script');

          cnzz_s_tag.type ='text/javascript';

          cnzz_s_tag.async =true;

          cnzz_s_tag.charset= 'utf-8';

          cnzz_s_tag.src ='https://w.cnzz.com/c.php?id=1276097034&async=1';

          var root_s =document.getElementsByTagName('script')[0];

          root_s.parentNode.insertBefore(cnzz_s_tag,root_s);

        </script>
      
    </div>

  </div>
</footer>

    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="https://github.com/xiao-linxin" title="" class="menuItem">Github</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">关于我</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>




  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("XzWyJ3sWCsDg9U9NbPNHkyzQ-gzGzoHsz", "V4KNTPdo7AO8gtV2m7hxkE12");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.article-title').length > 1) {
        showTime(Counter);
      }
    });
  </script>





  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":80,"height":160,"hOffset":0,"vOffset":-40},"mobile":{"show":true,"scale":0.2,"motion":true}});</script></body>
</html>